<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/static/bootstrap-4.5.0-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css">
    <title>个人中心</title>
</head>
<body>
<header class="navbar navbar-expand-lg navbar-dark bg-dark" th:fragment="header">
    <div class="container">
        <a class="navbar-brand" href="#">RowSpot</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-tag="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" th:href="@{/dubbo/index}">dubbo教程 <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/netty/index}">netty教程</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Dropdown
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle btn btn-success text-white" href="#" id="navbarDropdown1"
                       role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        分享
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                        <a class="dropdown-item disabled" href="#">分享</a>
                        <a class="dropdown-item" href="/user/share?c=A" th:href="@{/user/share?c=A}">技术分享</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item disabled" href="#">问答</a>
                        <a class="dropdown-item" href="/user/question?c=l" th:href="@{/user/question?c=l}">提问</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</header>

<!-- 主要内容部分 -->
<main role="main">
    <div class="jumbotron jumbotron-fluid" style="background-color:#f6f6f6;">
        <div class="container">
            <div class="row">
                <div class="col-2">
                    <a target="_self" th:href="${#strings.concat('/user/', userProfile.id, '/profile')}">
                        <img style="height: 165px; width: 165px;"
                             src="https://img.orchome.com/head/0A97CB1252F325C84FED9BA6F0240A04"
                             class="rounded-circle" alt="">
                    </a>
                </div>
                <div class="col-5">
                    <h3 th:text="${userProfile.nickname}"></h3>
                    <!-- 职位 -->
                    <div class="mt-2">
                        <form class="form-inline" onsubmit="return false;">
                            <div class="mb-1">
                            <i class="text-muted fa fa-address-card-o"></i>
                            <small class="ml-2" th:text="${userProfile.job}" id="job-text"></small>
                            </div>
                            <div class="form-group mx-sm-3 mb-1">
                                <input type="text" th:value="${userProfile.job}" id="job-input" class="form-control form-control-sm" placeholder="职位">
                            </div>
                            <button type="button" style="display: none;" id="update-job-btn" class="btn btn-sm btn-primary mb-1">保存</button>
                            <a class="ml-2 text-muted mb-1" id="edit-job" href="javascript:void(0);">编辑</a>
                        </form>
                    </div>
                    <!-- 城市 -->
                    <div class="mt-2">
                        <i class="text-muted fa fa-globe"></i>
                        <span class="ml-2" th:text="${userProfile.city}"></span>
                        <a class="ml-2 text-muted" href="javascript:void(0);">编辑</a>
                    </div>

                    <!-- 技能 -->
                    <div class="mt-2">
                        <i class="text-muted fa fa-gavel"></i>
                        <span class="ml-2" th:text="${userProfile.skills}"></span>
                        <a class="ml-2 text-muted" href="javascript:void(0);">编辑</a>
                    </div>

                    <!-- 网站 -->
                    <div class="mt-2">
                        <i class="text-muted fa fa-institution"></i>
                        <a th:href="${userProfile.website}" target="_blank" class="ml-2" th:text="${userProfile.website}"></a>
                        <a class="ml-2 text-muted" href="javascript:void(0);">编辑</a>
                    </div>
                </div>
                <div class="col-5">
                    <div class="p-2">
                        <div class="profile-desc-heading"></div>
                        <div class="profile-desc-body">
                            <div class="text-muted" th:text="${userProfile.intro}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-2">

                <div class="d-flex p-2">
                    <div class="flex-fill">
                        <div class="text-center text-muted">关注了</div>
                        <div class="text-center">233人</div>
                    </div>
                    <div class="flex-fill">
                        <div class="text-center text-muted">粉丝</div>
                        <div class="text-center">9876</div>
                    </div>
                </div>

                <div class="list-group mt-2">
                    <a th:href="@{/user/} + ${userProfile.id} + @{/profile}" class="list-group-item list-group-item-action">
                        主页
                    </a>
                    <a th:href="@{/user/} + ${userProfile.id} + @{/article/1}" class="list-group-item list-group-item-action">
                        文章
                        <span class="badge badge-primary badge-pill">14</span>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">回答</a>
                    <a href="#" class="list-group-item list-group-item-action">提问</a>
                    <a href="#" class="list-group-item list-group-item-action">
                        收藏
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">
                        点赞过的
                    </a>
                </div>
                <hr style="background-color:#eeeeee;">
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action">
                        声望记录
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">
                        设置
                    </a>
                </div>

            </div>
            <div class="col-7">

                <div class="card mb-3">
                    <div class="card-header">
                        社区贡献度
                    </div>
                    <div class="card-body">

                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        个人动态
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <div class="media">
                                <img src="https://img.orchome.com/head/0A97CB1252F325C84FED9BA6F0240A04"
                                     class="mr-3 rounded-circle" style="height: 32px; width: 32px;" alt="...">
                                <div class="media-body">
                                    <div><a href="">不荒</a>在<a href="">Kubernates 中文教程</a>中发表评论:</div>
                                    <div>学习一波~</div>
                                    <div class="mt-2"><span class="small text-muted">两小时前</span></div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="media">
                                <img src="https://img.orchome.com/head/0A97CB1252F325C84FED9BA6F0240A04"
                                     class="mr-3 rounded-circle" style="height: 32px; width: 32px;" alt="...">
                                <div class="media-body">
                                    <div><a href="">不荒</a>在<a href="">java专题</a>中发表评论:</div>
                                    <div>厉害了，大佬~</div>
                                    <div class="mt-2"><span class="small text-muted">两小时前</span></div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card-body">
                    <h5 class="card-title">技术雷达</h5>
                </div>

                <hr style="background-color:#eeeeee;">

                <div class="card-body mt-3">
                    <h5 class="card-title">统计</h5>
                    <div class="text-muted small">昨日访问:<span class="ml-2">8</span></div>
                    <div class="text-muted small">今日访问:<span class="ml-2">23</span></div>
                    <div class="text-muted small">本周访问:<span class="ml-2">56</span></div>
                    <div class="text-muted small">本月访问:<span class="ml-2">1432</span></div>
                    <div class="text-muted small">所有访问:<span class="ml-2">5600</span></div>
                    <div class="text-muted small">最近登录:<span class="ml-2">8 分钟前</span></div>
                    <div class="text-muted small">加入时间:<span class="ml-2">2020-12-01 13:44:40</span></div>
                    <div class="small"><span class="text-muted">在线状态:</span><span class="ml-2 text-success">在线</span></div>
                </div>
            </div>
        </div>
    </div>

</main>


<footer>

</footer>

<script src="/static/jquery/jquery.min.js"></script>
<script src="/static/bootstrap-4.5.0-dist/js/bootstrap.min.js"></script>

<script>
    const rootPath = '[[@{/}]]';
    // $(document).ready(function() {
        // alert(jobInfo)


    let updateJobBtn = document.getElementById('update-job-btn');
    let jobInput = document.getElementById('job-input');

    let editJobA = document.getElementById('edit-job');
    editJobA.addEventListener('click', function() {
        editJobA.style.display = 'none';
        updateJobBtn.style.display = '';
        jobInput.style.display = '';
    });

    updateJobBtn.addEventListener('click', function() {
        const jobInfo = document.getElementById('job-input').value;
        $.ajax({
            url: rootPath + 'api/user/addition',
            data: JSON.stringify({"jobInfo": jobInfo}),
            contentType: 'application/json;charset=utf8',
            method: 'POST',
            dataType: 'json',
            success: function (res) {
                if(res) {
                    let jobText = document.getElementById('job-text');
                    jobText.innerText = jobInfo;
                    updateJobBtn.style.display = 'none';
                    jobInput.style.display = 'none';
                    editJobA.style.display = '';
                }
            }
        });
    });
    // });
</script>

</body>
</html>